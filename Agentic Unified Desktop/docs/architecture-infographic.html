<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Athena – Architecture Infographic</title>
  <meta name="description" content="Infographic architecture page for the Athena Agentic Unified Desktop: real-time orchestration + SSE + MCP + Microsoft Graph." />

  <style>
    /*
      Palette policy: reuse existing UI tokens from public/css/style.css
      (no new brand colors introduced here)
    */
    :root {
      --bg-main:#FFFFFF;
      --bg-panel:#F8F9FA;
      --border-soft:#E9ECEF;
      --border-focus:#D0B0F8;
      --text-primary:#212529;
      --text-secondary:#6C757D;
      --bt-purple:#5500A9;
      --bt-pink:#E8005A;
      --bt-purple-light:#F4ECFC;
      --accent-positive:#20C997;
      --accent-warning:#FFC107;
      --accent-negative:#DC3545;
      --shadow-md:0 4px 12px rgba(0,0,0,0.05);
      --glass-bg: rgba(255,255,255,.62);
      --glass-bg-strong: rgba(255,255,255,.74);
      --glass-border: rgba(255,255,255,.6);
      --glass-outline: rgba(85,0,169,.15);
      --glass-shadow: 0 8px 24px rgba(0,0,0,.08);
      --canvas-grad:
        radial-gradient(1200px 800px at 10% -10%, #f7f2ff 0%, transparent 40%),
        radial-gradient(1000px 900px at 110% 10%, #ffe7f0 0%, transparent 45%),
        linear-gradient(180deg,#fbfbfd 0%, #ffffff 100%);

      --radius: 18px;
      --radius-sm: 14px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;

      --max: 1200px;
      --gutter: 20px;

      --ring: 0 0 0 1px rgba(255,255,255,.75), 0 0 0 2px rgba(85,0,169,.10);
      --ring-strong: 0 0 0 1px rgba(255,255,255,.75), 0 0 0 3px rgba(85,0,169,.18);
    }

    * { box-sizing: border-box; }

    html, body {
      height: 100%;
      margin: 0;
      font-family: var(--sans);
      color: var(--text-primary);
      background: var(--canvas-grad);
      overflow-x: hidden;
    }

    a { color: inherit; text-decoration: none; }
    a:hover { text-decoration: underline; }

    .wrap {
      width: min(var(--max), calc(100% - (var(--gutter) * 2)));
      margin: 0 auto;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 40;
      border-bottom: 1px solid rgba(233,236,239,.65);
      background: var(--glass-bg);
      backdrop-filter: saturate(140%) blur(10px);
      -webkit-backdrop-filter: saturate(140%) blur(10px);
      box-shadow: var(--glass-shadow);
    }

    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
      padding: 14px 0;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      min-width: 240px;
    }

    .brand img {
      height: 26px;
      width: auto;
      border-radius: 6px;
      box-shadow: 0 1px 2px rgba(0,0,0,.08);
    }

    .brand .title {
      display: flex;
      flex-direction: column;
      line-height: 1.1;
    }

    .brand .title strong {
      font-size: 14px;
      letter-spacing: .2px;
      color: var(--bt-purple);
    }

    .brand .title span {
      font-size: 12px;
      font-weight: 700;
      letter-spacing: .2px;
      color: var(--text-secondary);
    }

    .nav {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: var(--glass-bg);
      border: 1px solid rgba(255,255,255,.7);
      outline: 1px solid rgba(85,0,169,.08);
      box-shadow: 0 6px 18px rgba(0,0,0,.06);
      backdrop-filter: saturate(140%) blur(10px);
      -webkit-backdrop-filter: saturate(140%) blur(10px);
      font-size: 12px;
      font-weight: 800;
      letter-spacing: .2px;
      color: var(--bt-purple);
    }

    .chip small {
      font-weight: 800;
      color: var(--bt-pink);
      letter-spacing: .35px;
      text-transform: uppercase;
    }

    main { padding: 24px 0 70px; }

    .hero {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
      margin: 22px 0 18px;
    }

    @media (min-width: 980px) {
      .hero { grid-template-columns: 1.1fr .9fr; align-items: start; }
    }

    .card {
      border-radius: var(--radius);
      background: var(--glass-bg-strong);
      border: 1px solid rgba(255,255,255,.7);
      outline: 1px solid rgba(85,0,169,.10);
      box-shadow: var(--glass-shadow);
      backdrop-filter: saturate(140%) blur(12px);
      -webkit-backdrop-filter: saturate(140%) blur(12px);
    }

    .hero-copy {
      padding: 22px 22px 18px;
      position: relative;
      overflow: hidden;
    }

    .hero-copy:before {
      content: "";
      position: absolute;
      inset: -60px -80px auto auto;
      width: 240px;
      height: 240px;
      background: radial-gradient(circle at 30% 30%, rgba(232,0,90,.20), transparent 62%);
      filter: blur(2px);
      transform: translateZ(0);
      pointer-events: none;
    }

    .h1 {
      margin: 0;
      font-size: 28px;
      line-height: 1.15;
      letter-spacing: .2px;
      color: var(--text-primary);
    }

    .h1 strong {
      color: var(--bt-purple);
    }

    .lede {
      margin: 10px 0 0;
      font-size: 14px;
      line-height: 1.5;
      color: var(--text-secondary);
      font-weight: 700;
      max-width: 66ch;
    }

    .badges {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 14px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 12px;
      background: linear-gradient(180deg, rgba(244,236,252,.90), rgba(255,255,255,.92));
      border: 1px solid rgba(85,0,169,.12);
      box-shadow: 0 10px 26px rgba(85,0,169,.06);
      font-weight: 900;
      font-size: 12px;
      letter-spacing: .2px;
    }

    .badge b { color: var(--bt-pink); }

    .hero-meta {
      padding: 18px;
    }

    .meta-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }

    @media (min-width: 600px) {
      .meta-grid { grid-template-columns: 1fr 1fr; }
    }

    .meta {
      background: rgba(255,255,255,.76);
      border: 1px solid var(--border-soft);
      border-radius: var(--radius-sm);
      padding: 12px;
      box-shadow: 0 6px 16px rgba(0,0,0,.05);
    }

    .meta .k {
      font-size: 11px;
      color: var(--text-secondary);
      font-weight: 900;
      letter-spacing: .35px;
      text-transform: uppercase;
      margin-bottom: 6px;
    }

    .meta .v {
      font-family: var(--mono);
      font-size: 12px;
      font-weight: 800;
      color: var(--bt-purple);
      word-break: break-word;
    }

    .section {
      margin-top: 18px;
      display: grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }

    @media (min-width: 980px) {
      .section { grid-template-columns: 1.1fr .9fr; }
      .full { grid-column: 1 / -1; }
    }

    .panel {
      padding: 18px;
    }

    .panel h2 {
      margin: 0 0 10px;
      font-size: 13px;
      letter-spacing: .35px;
      text-transform: uppercase;
      font-weight: 900;
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .panel h2 .tag {
      font-size: 11px;
      font-weight: 900;
      color: var(--bt-pink);
      background: rgba(232,0,90,.10);
      border: 1px solid rgba(232,0,90,.18);
      padding: 4px 10px;
      border-radius: 999px;
    }

    .panel p {
      margin: 0 0 12px;
      color: var(--text-secondary);
      font-size: 13px;
      font-weight: 700;
      line-height: 1.55;
    }

    .list {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 10px;
    }

    .item {
      background: rgba(255,255,255,.76);
      border: 1px solid var(--border-soft);
      border-radius: var(--radius-sm);
      padding: 12px;
      box-shadow: 0 6px 16px rgba(0,0,0,.05);
    }

    .item .label {
      font-size: 12px;
      font-weight: 900;
      color: var(--bt-purple);
      margin: 0 0 6px;
      letter-spacing: .2px;
    }

    .item .desc {
      margin: 0;
      font-size: 12px;
      color: var(--text-secondary);
      font-weight: 700;
    }

    .code {
      font-family: var(--mono);
      font-size: 12px;
      color: var(--bt-purple);
      background: rgba(244,236,252,.9);
      border: 1px solid rgba(85,0,169,.14);
      padding: 3px 8px;
      border-radius: 10px;
      white-space: nowrap;
    }

    /* Infographic canvas */
    .infographic {
      padding: 0;
      overflow: hidden;
    }

    .canvas {
      position: relative;
      padding: 16px;
      min-height: 520px;
    }

    .canvas:before {
      content: "";
      position: absolute;
      inset: -140px;
      background:
        radial-gradient(520px 380px at 20% 20%, rgba(85,0,169,.14), transparent 62%),
        radial-gradient(540px 420px at 78% 12%, rgba(232,0,90,.12), transparent 60%),
        radial-gradient(520px 420px at 80% 85%, rgba(32,201,151,.10), transparent 60%);
      filter: blur(10px);
      transform: translateZ(0);
      pointer-events: none;
    }

    .svg {
      width: 100%;
      height: 520px;
      position: relative;
      z-index: 1;
    }

    .node {
      filter: drop-shadow(0 12px 24px rgba(85,0,169,.10));
    }

    .node rect {
      fill: rgba(255,255,255,.84);
      stroke: rgba(85,0,169,.22);
      stroke-width: 1.5;
    }

    .node .title {
      font: 900 13px/1.1 var(--sans);
      fill: var(--bt-purple);
      letter-spacing: .2px;
    }

    .node .sub {
      font: 800 11px/1.2 var(--sans);
      fill: var(--text-secondary);
    }

    .cluster rect {
      fill: rgba(244,236,252,.55);
      stroke: rgba(85,0,169,.16);
      stroke-width: 1.25;
    }

    .cluster text {
      font: 900 11px/1 var(--sans);
      fill: rgba(85,0,169,.70);
      letter-spacing: .32px;
      text-transform: uppercase;
    }

    .edge {
      fill: none;
      stroke-width: 3.2;
      stroke-linecap: round;
    }

    .edge.primary { stroke: rgba(85,0,169,.60); }
    .edge.accent  { stroke: rgba(232,0,90,.55); }
    .edge.stream  { stroke: rgba(32,201,151,.55); }

    .edge.animated {
      stroke-dasharray: 10 10;
      animation: dash 2.6s linear infinite;
    }

    .edge.slow {
      stroke-dasharray: 14 14;
      animation-duration: 3.8s;
    }

    @keyframes dash {
      from { stroke-dashoffset: 0; }
      to { stroke-dashoffset: -48; }
    }

    .pulse {
      transform-origin: center;
      animation: pulse 2.4s ease-in-out infinite;
    }

    .pulse.fast { animation-duration: 1.85s; }

    @keyframes pulse {
      0%, 100% { opacity: .55; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.06); }
    }

    .dot {
      animation: float 5.2s ease-in-out infinite;
      opacity: .65;
    }

    .dot:nth-child(2) { animation-duration: 6.1s; }
    .dot:nth-child(3) { animation-duration: 7.0s; }
    .dot:nth-child(4) { animation-duration: 6.4s; }

    @keyframes float {
      0%,100% { transform: translate(0, 0); }
      50% { transform: translate(0, -10px); }
    }

    /* Scroll story */
    .story {
      display: grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }

    @media (min-width: 980px) {
      .story { grid-template-columns: .95fr 1.05fr; }
    }

    .steps {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }

    .step {
      background: rgba(255,255,255,.76);
      border: 1px solid var(--border-soft);
      border-radius: var(--radius-sm);
      padding: 12px;
      box-shadow: 0 6px 16px rgba(0,0,0,.05);
      position: relative;
      overflow: hidden;
    }

    .step:before {
      content: "";
      position: absolute;
      inset: 0;
      opacity: 0;
      background: linear-gradient(90deg, rgba(85,0,169,.09), rgba(232,0,90,.06));
      transition: opacity .25s ease;
      pointer-events: none;
    }

    .step.active {
      border-color: rgba(85,0,169,.25);
      box-shadow: 0 16px 30px rgba(85,0,169,.10);
      outline: var(--ring-strong);
    }

    .step.active:before { opacity: 1; }

    .step .h {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 8px;
    }

    .step .h strong {
      font-size: 13px;
      color: var(--bt-purple);
      letter-spacing: .2px;
    }

    .step .h span {
      font-family: var(--mono);
      font-size: 11px;
      font-weight: 900;
      color: rgba(232,0,90,.85);
    }

    .step p {
      margin: 0;
      font-size: 12px;
      color: var(--text-secondary);
      font-weight: 700;
      line-height: 1.55;
    }

    .legend {
      background: rgba(255,255,255,.76);
      border: 1px solid var(--border-soft);
      border-radius: var(--radius-sm);
      padding: 12px;
      box-shadow: 0 6px 16px rgba(0,0,0,.05);
    }

    .legend-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 8px 0;
      font-size: 12px;
      color: var(--text-secondary);
      font-weight: 800;
    }

    .swatch {
      width: 16px;
      height: 16px;
      border-radius: 5px;
      box-shadow: var(--ring);
    }

    .swatch.p { background: rgba(85,0,169,.60); }
    .swatch.a { background: rgba(232,0,90,.55); }
    .swatch.s { background: rgba(32,201,151,.55); }

    footer {
      margin-top: 18px;
      padding-top: 16px;
      border-top: 1px solid rgba(233,236,239,.65);
      color: var(--text-secondary);
      font-size: 12px;
      font-weight: 700;
    }

    @media (prefers-reduced-motion: reduce) {
      .edge.animated, .pulse, .dot { animation: none !important; }
      .step:before { transition: none !important; }
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="topbar">
        <div class="brand">
          <img src="../images/cog-logo.jpeg" alt="Cognizant" />
          <div class="title">
            <strong>Athena · Solution Architecture</strong>
            <span>Infographic (Audience-ready)</span>
          </div>
        </div>
        <nav class="nav" aria-label="Page sections">
          <a class="chip" href="#architecture"><small>01</small> Architecture</a>
          <a class="chip" href="#flows"><small>02</small> Flows</a>
          <a class="chip" href="#guardrails"><small>03</small> Guardrails</a>
        </nav>
      </div>
    </div>
  </header>

  <main>
    <div class="wrap">
      <section class="hero">
        <div class="card hero-copy">
          <h1 class="h1">Real-time agent desktop with <strong>LLM orchestration</strong>, <strong>SSE streaming</strong>, and <strong>MCP → Graph</strong> execution.</h1>
          <p class="lede">
            This infographic explains the end-to-end architecture of the Agentic Unified Desktop (“Athena”):
            from customer utterances to insight widgets, and from deterministic action badges to real Microsoft 365 admin outcomes.
          </p>
          <div class="badges" aria-label="Highlights">
            <div class="badge"><b>LLM</b> widgets in JSON</div>
            <div class="badge"><b>SSE</b> live Customer 360</div>
            <div class="badge"><b>MCP</b> deterministic actions</div>
            <div class="badge"><b>Graph</b> real tenant ops</div>
          </div>
        </div>

        <div class="card hero-meta" aria-label="Key entry points">
          <div class="meta-grid">
            <div class="meta">
              <div class="k">Desktop Backend</div>
              <div class="v">src/server.js</div>
            </div>
            <div class="meta">
              <div class="k">Insight Endpoint</div>
              <div class="v">POST /api/v1/get-insights</div>
            </div>
            <div class="meta">
              <div class="k">External Chat</div>
              <div class="v">POST /api/v1/external-chat</div>
            </div>
            <div class="meta">
              <div class="k">SSE Stream</div>
              <div class="v">GET /api/v1/stream/customer-360/:id</div>
            </div>
          </div>
        </div>
      </section>

      <section id="architecture" class="section">
        <div class="card infographic full" aria-label="Animated architecture map">
          <div class="panel canvas">
            <h2>Architecture Map <span class="tag">Animated</span></h2>

            <svg class="svg" viewBox="0 0 1100 520" role="img" aria-label="Architecture diagram: client to Athena to MCP to Microsoft Graph">
              <defs>
                <linearGradient id="gradPrimary" x1="0" x2="1">
                  <stop offset="0" stop-color="rgba(85,0,169,.70)" />
                  <stop offset="1" stop-color="rgba(232,0,90,.65)" />
                </linearGradient>
                <linearGradient id="gradStream" x1="0" x2="1">
                  <stop offset="0" stop-color="rgba(32,201,151,.60)" />
                  <stop offset="1" stop-color="rgba(85,0,169,.55)" />
                </linearGradient>
              </defs>

              <!-- Background dots -->
              <g opacity=".9">
                <circle class="dot" cx="155" cy="74" r="4" fill="rgba(85,0,169,.35)" />
                <circle class="dot" cx="920" cy="96" r="4" fill="rgba(232,0,90,.30)" />
                <circle class="dot" cx="880" cy="430" r="4" fill="rgba(32,201,151,.26)" />
                <circle class="dot" cx="220" cy="430" r="4" fill="rgba(85,0,169,.22)" />
              </g>

              <!-- Clusters -->
              <g class="cluster">
                <rect x="40" y="88" width="250" height="330" rx="18" />
                <text x="60" y="118">Clients</text>

                <rect x="325" y="52" width="460" height="410" rx="22" />
                <text x="345" y="82">Agentic Unified Desktop (Node/Express)</text>

                <rect x="820" y="108" width="240" height="150" rx="18" />
                <text x="840" y="138">MCP Layer</text>

                <rect x="820" y="292" width="240" height="170" rx="18" />
                <text x="840" y="322">Microsoft 365</text>
              </g>

              <!-- Nodes -->
              <g class="node" transform="translate(70 140)">
                <rect width="190" height="70" rx="14" />
                <text class="title" x="16" y="28">Agent Desktop UI</text>
                <text class="sub" x="16" y="48">public/ (SPA)</text>
              </g>

              <g class="node" transform="translate(70 236)">
                <rect width="190" height="70" rx="14" />
                <text class="title" x="16" y="28">CX Demo</text>
                <text class="sub" x="16" y="48">proxy + customer UI</text>
              </g>

              <g class="node" transform="translate(360 118)">
                <rect width="390" height="76" rx="16" />
                <text class="title" x="18" y="30">API Surface</text>
                <text class="sub" x="18" y="52">/api/v1/external-chat · /get-insights · /agent-reply</text>
              </g>

              <g class="node" transform="translate(360 216)">
                <rect width="390" height="70" rx="16" />
                <text class="title" x="18" y="28">LLM Orchestrator</text>
                <text class="sub" x="18" y="48">llmOrchestrator.js (widgets + actions)</text>
              </g>

              <g class="node" transform="translate(360 304)">
                <rect width="390" height="70" rx="16" />
                <text class="title" x="18" y="28">M365 Action Executor</text>
                <text class="sub" x="18" y="48">m365ActionExecutor.js (deterministic)</text>
              </g>

              <g class="node" transform="translate(360 392)">
                <rect width="390" height="50" rx="16" />
                <text class="title" x="18" y="30">SSE Stream</text>
                <text class="sub" x="160" y="30">/stream/customer-360/:id</text>
              </g>

              <g class="node" transform="translate(850 162)">
                <rect width="180" height="70" rx="14" />
                <text class="title" x="16" y="28">MCP Client</text>
                <text class="sub" x="16" y="48">stdio child proc</text>
              </g>

              <g class="node" transform="translate(850 346)">
                <rect width="180" height="86" rx="14" />
                <text class="title" x="16" y="28">m365-admin-mcp</text>
                <text class="sub" x="16" y="48">Graph tools</text>
                <text class="sub" x="16" y="66">client credentials</text>
              </g>

              <g class="node" transform="translate(850 448)">
                <rect width="180" height="50" rx="14" />
                <text class="title" x="16" y="30">Microsoft Graph</text>
                <text class="sub" x="130" y="30">v1.0</text>
              </g>

              <!-- Edges (requests) -->
              <path class="edge primary animated" d="M260 175 C 300 175, 310 160, 360 154" />
              <path class="edge primary animated slow" d="M260 272 C 300 272, 310 220, 360 154" />

              <path class="edge accent animated" d="M750 338 C 800 338, 818 260, 850 198" />
              <path class="edge accent animated slow" d="M750 338 C 800 338, 818 320, 850 389" />
              <path class="edge accent animated" d="M940 432 C 940 440, 940 444, 940 448" />

              <!-- Streaming back to clients -->
              <path class="edge stream animated" d="M360 416 C 290 416, 280 420, 260 440" />
              <path class="edge stream animated slow" d="M360 416 C 290 416, 220 398, 165 306" />

              <!-- Pulses -->
              <circle class="pulse" cx="360" cy="154" r="6" fill="rgba(85,0,169,.60)" />
              <circle class="pulse fast" cx="750" cy="338" r="6" fill="rgba(232,0,90,.55)" />
              <circle class="pulse" cx="360" cy="416" r="6" fill="rgba(32,201,151,.55)" />
            </svg>
          </div>
        </div>

        <div class="card">
          <div class="panel">
            <h2>What runs where <span class="tag">Modules</span></h2>
            <p>
              Athena is the orchestration hub. It produces action badges and widgets, streams updates via SSE, and executes Microsoft 365 admin actions via MCP.
            </p>

            <div class="list">
              <div class="item">
                <div class="label">UI (Browser)</div>
                <p class="desc">Renders widgets, subscribes to SSE, and triggers badge executions.</p>
              </div>
              <div class="item">
                <div class="label">Athena API</div>
                <p class="desc">Handles <span class="code">/external-chat</span>, <span class="code">/get-insights</span>, <span class="code">/agent-reply</span>, and <span class="code">/stream</span>.</p>
              </div>
              <div class="item">
                <div class="label">LLM Orchestrator</div>
                <p class="desc">Prompts + normalizes JSON widgets and recommended actions.</p>
              </div>
              <div class="item">
                <div class="label">M365 Action Executor</div>
                <p class="desc">Executes deterministic <span class="code">M365_ACTION</span> payloads via MCP → Graph.</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="flows" class="section">
        <div class="card full">
          <div class="panel">
            <h2>End-to-end flows <span class="tag">Scroll</span></h2>
            <p>
              This is the full “customer → insights → agent action → execution” lifecycle.
              As you scroll, each step highlights to match the animated map.
            </p>

            <div class="story">
              <div class="steps" id="steps" aria-label="Architecture steps">
                <div class="step" data-focus="insight">
                  <div class="h"><strong>Customer message arrives</strong> <span>01</span></div>
                  <p>Customer utterance enters via <span class="code">POST /api/v1/external-chat</span> (direct UI or CX demo proxy).</p>
                </div>
                <div class="step" data-focus="orchestrate">
                  <div class="h"><strong>Insights are orchestrated</strong> <span>02</span></div>
                  <p>Backend calls <span class="code">/api/v1/get-insights</span> → LLM orchestrator produces widget JSON + suggested actions.</p>
                </div>
                <div class="step" data-focus="stream">
                  <div class="h"><strong>UI updates in real-time</strong> <span>03</span></div>
                  <p>Latest snapshots broadcast through <span class="code">GET /api/v1/stream/customer-360/:id</span> (SSE).</p>
                </div>
                <div class="step" data-focus="execute">
                  <div class="h"><strong>Agent clicks a badge</strong> <span>04</span></div>
                  <p>Actions contain a deterministic <span class="code">M365_ACTION</span> payload, executed server-side.</p>
                </div>
                <div class="step" data-focus="mcp">
                  <div class="h"><strong>MCP tools run</strong> <span>05</span></div>
                  <p>Athena spawns an MCP client (stdio) and calls tools exposed by <span class="code">m365-admin-mcp</span>.</p>
                </div>
                <div class="step" data-focus="graph">
                  <div class="h"><strong>Graph changes happen</strong> <span>06</span></div>
                  <p>MCP server executes Microsoft Graph calls (create/disable/delete users, list SKUs, assign licenses).</p>
                </div>
              </div>

              <div class="legend" aria-label="Legend">
                <div class="legend-row"><span class="swatch p" aria-hidden="true"></span> Request/Orchestration paths</div>
                <div class="legend-row"><span class="swatch s" aria-hidden="true"></span> SSE streaming paths</div>
                <div class="legend-row"><span class="swatch a" aria-hidden="true"></span> Deterministic action execution</div>
                <p style="margin:10px 0 0; font-size:12px; color:var(--text-secondary); font-weight:700; line-height:1.55;">
                  This page is safe to share: it contains no secrets.
                  For a technical reference diagram, see <span class="code">docs/architecture.html</span>.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="guardrails" class="section">
        <div class="card">
          <div class="panel">
            <h2>Safety & controls <span class="tag">Guardrails</span></h2>
            <p>
              Destructive operations are gated to prevent mistakes. If the user identity is ambiguous, Athena asks for a UPN before proceeding.
            </p>
            <div class="list">
              <div class="item">
                <div class="label">UPN-first for delete/disable</div>
                <p class="desc">Never delete/disable by display name alone when multiple matches exist.</p>
              </div>
              <div class="item">
                <div class="label">LLM-assisted entity extraction</div>
                <p class="desc">If required fields are missing, Athena uses a JSON extractor and/or requests specifics from the agent.</p>
              </div>
              <div class="item">
                <div class="label">Deterministic execution</div>
                <p class="desc">Actions execute through typed <span class="code">M365_ACTION</span> payloads rather than free-form text.</p>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="panel">
            <h2>Audience talking points <span class="tag">Wow</span></h2>
            <p>
              A single architecture that blends real-time agent experience with enterprise-grade admin execution.
              Built to demonstrate speed, safety, and operational realism.
            </p>
            <div class="list">
              <div class="item">
                <div class="label">Real tenant impact</div>
                <p class="desc">Graph-backed license counts and user lifecycle operations (not mocked).</p>
              </div>
              <div class="item">
                <div class="label">Live orchestration</div>
                <p class="desc">Widgets + next best actions evolve in-session and stream via SSE.</p>
              </div>
              <div class="item">
                <div class="label">Composable extensibility</div>
                <p class="desc">Add new tools and actions via MCP without redesigning the UI.</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <footer class="wrap">
        Tip: for offline sharing, send this HTML file plus the logo at <span class="code">images/cog-logo.jpeg</span>.
      </footer>
    </div>
  </main>

  <script>
    (function () {
      const steps = Array.from(document.querySelectorAll('.step'));
      if (!steps.length) return;

      const setActive = (el) => {
        steps.forEach(s => s.classList.toggle('active', s === el));
      };

      const observer = new IntersectionObserver((entries) => {
        entries
          .filter(e => e.isIntersecting)
          .sort((a, b) => b.intersectionRatio - a.intersectionRatio)
          .slice(0, 1)
          .forEach(e => setActive(e.target));
      }, {
        root: null,
        threshold: [0.2, 0.35, 0.5, 0.65, 0.8]
      });

      steps.forEach(s => observer.observe(s));
      setActive(steps[0]);
    })();
  </script>
</body>
</html>
